# CSV Files Analysis - CAD with AI Project

This document analyzes all CSV files in the project and determines which ones are useful vs. temporary/derived.

---

## üìä CSV Files Overview

### **Total CSV Files Found: 9**

---

## ‚úÖ **ESSENTIAL / USEFUL CSV Files**

### 1. **`original_parts.csv`** ‚≠ê‚≠ê‚≠ê
**Status:** **ESSENTIAL - Core Data File**

**Purpose:**
- Stores original part data before thinning
- Contains: model_id, part_id, element counts, stress statistics, pitch, volume, density, mass
- Used by: `recommend_thinning_final.py` (AI recommendations)
- Required for: AI pipeline to run

**Columns:**
- `model_id`, `part_id`, `orig_el`, `orig_mean`, `orig_std`, `pitch_m`, `volume_m3`, `density_kg_m3`, `mass_kg`

**Generated by:** `add_mass_volume.py` ‚Üí `update_original_parts()` in frontend

**Keep?** ‚úÖ **YES - Critical for pipeline**

---

### 2. **`thinning_recommendations_final.csv`** ‚≠ê‚≠ê‚≠ê
**Status:** **ESSENTIAL - AI Output**

**Purpose:**
- Contains AI-generated thinning recommendations
- Stores: recommended reduction %, predicted stress changes, expected mass savings
- Used by: Frontend GUI to display results
- Used by: `voxel_sdf_thinning.py` and `apply_ai_thinning.py` to apply thinning

**Columns:**
- `model_id`, `part_id`, `recommended_reduction_pct`, `predicted_delta_p95_pct`, `expected_mass_saving_kg`, `expected_volume_saving_m3`, `decision_reason`

**Generated by:** `recommend_thinning_final.py`

**Keep?** ‚úÖ **YES - Primary AI output, displayed in GUI**

---

### 3. **`dataset_with_mass_volume.csv`** ‚≠ê‚≠ê
**Status:** **USEFUL - Intermediate Data**

**Purpose:**
- Combined dataset with FEA stress data + mass/volume calculations
- Contains: Part info, stress statistics (max, mean, min, p95, std), model type, pitch, volume, density, mass
- Used by: `build_pairwise.py` to create training dataset
- Used by: `update_original_parts()` to create `original_parts.csv`

**Columns:**
- `Part`, `Color_RGBA`, `ElementCount`, `vonMises_max_Pa`, `vonMises_mean_Pa`, `vonMises_min_Pa`, `vonMises_p95_Pa`, `vonMises_std_Pa`, `Model_Type`, `Model`, `pitch_m`, `volume_m3`, `density_kg_m3`, `mass_kg`

**Generated by:** `add_mass_volume.py`

**Keep?** ‚úÖ **YES - Useful for analysis and debugging**

---

### 4. **`pairwise_finite.csv`** ‚≠ê‚≠ê
**Status:** **USEFUL - ML Training Data**

**Purpose:**
- Pairwise comparison dataset (original vs. thinned)
- Contains: Element reduction %, stress change %, anomaly flags
- Used by: `enhanced_thickness_optimizer.py` for ML model training
- Used by: Analysis and visualization scripts

**Columns:**
- `model_id`, `part_id`, `orig_el`, `orig_p95`, `orig_mean`, `orig_std`, `orig_volume_m3`, `orig_mass_kg`, `pitch_m`, `density_kg_m3`, `ero_el`, `ero_volume_m3`, `ero_mass_kg`, `elem_reduction_pct`, `delta_p95_pct`, `delta_max_pct`, `delta_mean_pct`, `anomaly`

**Generated by:** `build_pairwise.py`

**Keep?** ‚úÖ **YES - Required for ML training**

---

### 5. **`pairwise_eda_clipped.csv`** ‚≠ê
**Status:** **OPTIONAL - Analysis/Visualization**

**Purpose:**
- Clipped version of pairwise data for EDA (Exploratory Data Analysis)
- Outliers removed for better visualization
- Used by: Analysis scripts and visualizations

**Columns:** Same as `pairwise_finite.csv`

**Generated by:** `build_pairwise.py` (clipped version)

**Keep?** ‚ö†Ô∏è **OPTIONAL - Useful for analysis, but can be regenerated**

---

## üìã **REPORT CSV Files (Generated After Thinning)**

### 6. **`voxel_thinning_apply_report.csv`** ‚≠ê‚≠ê
**Status:** **USEFUL - Thinning Results**

**Purpose:**
- Reports actual thinning results from `voxel_sdf_thinning.py`
- Contains: Target vs. achieved reduction %, removed voxels, stop reasons
- Used by: Frontend GUI to display thinning status
- Shows what actually happened vs. what was recommended

**Columns:**
- `model_id`, `part_id`, `target_pct`, `achieved_pct`, `delta_mm_used`, `removed_voxels`, `stop_reason`

**Generated by:** `voxel_sdf_thinning.py`

**Keep?** ‚úÖ **YES - Shows actual thinning results**

---

### 7. **`thinning_apply_report.csv`** ‚≠ê
**Status:** **OPTIONAL - Legacy Report**

**Purpose:**
- Reports thinning results from `apply_ai_thinning.py` (older method)
- Currently **NOT USED** in active pipeline (commented out in frontend)
- Replaced by `voxel_thinning_apply_report.csv`

**Columns:**
- `model_id`, `part_id`, `target_pct`, `achieved_pct`, `removed_voxels`, `stop_reason`

**Generated by:** `apply_ai_thinning.py`

**Keep?** ‚ö†Ô∏è **OPTIONAL - Legacy file, can be deleted if not using old thinning method**

---

### 8. **`surface_offset_thinning_report.csv`** ‚≠ê
**Status:** **OPTIONAL - Unused**

**Purpose:**
- Reports thinning results from `surface_offset_thinning.py`
- Currently **NOT USED** in active pipeline (commented out in frontend)
- Alternative thinning method not actively used

**Columns:**
- `model_id`, `part_id`, `target_pct`, `achieved_pct`, `offset_mm`, `stop_reason`

**Generated by:** `surface_offset_thinning.py`

**Keep?** ‚ö†Ô∏è **OPTIONAL - Can be deleted if not using surface offset thinning**

---

## üîÑ **BACKUP CSV Files**

### 9. **`original_parts.backup.csv`** ‚≠ê
**Status:** **BACKUP - Safety Copy**

**Purpose:**
- Backup of `original_parts.csv` created before filtering for selected parts
- Used by: Frontend to restore full dataset after processing selected parts
- Prevents data loss when filtering

**Columns:** Same as `original_parts.csv`

**Generated by:** `simple_ply_processor.py` ‚Üí `run_selected_recommendations()`

**Keep?** ‚úÖ **YES - Safety backup, automatically managed**

---

## üìà **Summary Table**

| CSV File | Status | Keep? | Regeneratable? | Used By |
|----------|--------|-------|----------------|---------|
| `original_parts.csv` | ‚≠ê‚≠ê‚≠ê Essential | ‚úÖ YES | ‚ùå No (requires pipeline) | AI recommendations, Frontend |
| `thinning_recommendations_final.csv` | ‚≠ê‚≠ê‚≠ê Essential | ‚úÖ YES | ‚ùå No (requires ML models) | Frontend, Thinning scripts |
| `dataset_with_mass_volume.csv` | ‚≠ê‚≠ê Useful | ‚úÖ YES | ‚úÖ Yes (from FEA) | Pairwise building, Analysis |
| `pairwise_finite.csv` | ‚≠ê‚≠ê Useful | ‚úÖ YES | ‚úÖ Yes (from dataset) | ML training |
| `pairwise_eda_clipped.csv` | ‚≠ê Optional | ‚ö†Ô∏è Optional | ‚úÖ Yes | Analysis only |
| `voxel_thinning_apply_report.csv` | ‚≠ê‚≠ê Useful | ‚úÖ YES | ‚úÖ Yes (from thinning) | Frontend display |
| `thinning_apply_report.csv` | ‚≠ê Legacy | ‚ö†Ô∏è Optional | ‚úÖ Yes | None (commented out) |
| `surface_offset_thinning_report.csv` | ‚≠ê Unused | ‚ö†Ô∏è Optional | ‚úÖ Yes | None (commented out) |
| `original_parts.backup.csv` | ‚≠ê Backup | ‚úÖ YES | ‚úÖ Yes (auto-generated) | Frontend restore |

---

## üéØ **Recommendations**

### **Must Keep (5 files):**
1. ‚úÖ `original_parts.csv` - Core data
2. ‚úÖ `thinning_recommendations_final.csv` - AI output
3. ‚úÖ `dataset_with_mass_volume.csv` - Intermediate data
4. ‚úÖ `pairwise_finite.csv` - ML training data
5. ‚úÖ `voxel_thinning_apply_report.csv` - Thinning results

### **Optional Keep (2 files):**
6. ‚ö†Ô∏è `pairwise_eda_clipped.csv` - Useful for analysis, but regeneratable
7. ‚ö†Ô∏è `original_parts.backup.csv` - Auto-managed backup

### **Can Delete (2 files):**
8. ‚ùå `thinning_apply_report.csv` - Legacy, not used
9. ‚ùå `surface_offset_thinning_report.csv` - Not used in active pipeline

---

## üîç **File Dependencies**

```
voxel_to_fea_complete.py
    ‚Üì
combine_results.py
    ‚Üì
add_mass_volume.py ‚Üí dataset_with_mass_volume.csv
    ‚Üì
build_pairwise.py ‚Üí pairwise_finite.csv, pairwise_eda_clipped.csv
    ‚Üì
enhanced_thickness_optimizer.py (trains ML models)
    ‚Üì
recommend_thinning_final.py ‚Üí thinning_recommendations_final.csv
    ‚Üì
voxel_sdf_thinning.py ‚Üí voxel_thinning_apply_report.csv
```

---

## üí° **Best Practices**

1. **Version Control:**
   - ‚úÖ Commit essential CSV files (`original_parts.csv`, `thinning_recommendations_final.csv`)
   - ‚ö†Ô∏è Consider `.gitignore` for regeneratable files (`*_report.csv`, `*_backup.csv`)

2. **Storage:**
   - Keep essential files in project root
   - Consider moving reports to `reports/` folder
   - Keep backups separate from main data

3. **Cleanup:**
   - Delete legacy report files if not using those methods
   - Regenerate intermediate files when needed
   - Keep only what you actively use

---

## üìù **Notes**

- All CSV files are currently empty (only headers) - this is normal for a fresh project
- Files will populate as you run the pipeline
- Report files are generated after thinning operations
- Backup files are automatically created and restored by the frontend

